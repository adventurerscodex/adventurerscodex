<form data-bind="submit: $component.submit">
  <card-action-buttons params="{reset: $component.reset}"></card-action-buttons>
  <div data-bind="with: entity">
    <!-- ko if: $component.existingData -->
    <div class="h4"
         style="padding-top: 5px;"
         data-bind="text: name">
    </div>
    <!-- /ko -->
    <!-- ko ifnot: $component.existingData -->
    <div class="h4"
         style="padding-top: 5px;">
      New Trait
    </div>
    <!-- /ko -->
    <div class="form-group">
      <label for="name"
             class="control-label">Name</label>
      <!-- ko if: $component.existingData -->
      <input class="form-control traitNameInput"
             placeholder="Trance"
             data-bind="value: name,
             event: { blur: $component.reviewInput, invalid: $component.invalidate },
             attr: { ...$component.validation.name },
             hasFocus: $component.formElementHasFocus">
       <!-- /ko -->
       <!-- ko ifnot: $component.existingData -->
       <input class="form-control traitNameInput"
              placeholder="Trance"
              data-bind="value: name,
              hasFocus: $component.formElementHasFocus,
              event: { blur: $component.reviewInput, invalid: $component.invalidate },
              attr: { ...$component.validation.name },
              autocomplete: {
                source: $component.traitsPrePopFilter,
                onselect: $component.populateTrait }">
        <!-- /ko -->
    </div>
    <div class="form-group">
      <label for="race"
             class="control-label">Race</label>
      <input class="form-control traitRaceInput"
             placeholder="Elf"
             data-bind="value: race,
             event: { blur: $component.reviewInput, invalid: $component.invalidate },
             attr: { ...$component.validation.name },
             autocomplete: {
               source: $component.raceOptions,
               onselect: $component.populateRace }">
    </div>
    <div class="form-group">
      <label for="npcDescription"
             class="control-label">Description</label>
      <!-- ko if: $component.show -->
      <textarea rows="6"
                class="form-control"
                data-bind="value: description,
                event: { blur: $component.reviewInput, invalid: $component.invalidate },
                attr: { ...$component.validation.name },
                markdownEditor: true">
              </textarea>
              <small class="text-muted">
                Text in this panel can be styled using Markdown. Click
                <a target="_blank"
                  href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">here</a> to see a guide.
              </small>
      <!-- /ko -->
    </div>
    <div class="form-group">
      <input type='checkbox'
             style=""
             class='ac-checkbox sr-only'
             data-bind="checked: $component.isTracked, attr: {id: `${$component.containerId}_tracked`}"></input>
      <label data-bind="attr: {for: `${$component.containerId}_tracked`}">
        Tracked?
      </label>&nbsp;<span class="fa fa-info-circle"
            style="cursor:pointer;"
            data-bind="popover: { content: $component.popoverText }"></span>
    </div>
    <!-- ko if: $component.isTracked() -->
    <ac-tracked-form params="{tracked: $component.tracked}"></ac-tracked-form>
    <!-- /ko -->
  </div>
  <form-card-footer params="{
  reset: $component.reset,
  delete: $component.delete,
  addForm: $component.addForm,
  showDisclaimer: $component.showDisclaimer
}"></form-card-footer>
</form>
