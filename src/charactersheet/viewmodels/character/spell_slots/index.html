<div id="slot-pane"
     class="ac-pane panel-body">
  <div class="h4 card-title">
    Spell Slots<br/>
    <small>These slots are configurable to reset on a short or long rest. Click
      on a slot to edit it.</small>
  </div>
  <table class="table table-responsive table-ac-bordered">
    <thead class="ac-table-header">
      <tr><th colspan="7" /></tr>
    </thead>
    <!-- ko if: loaded(), completeOn: 'render' -->
    <tbody>
      <!-- ko foreach: filteredAndSortedEntities -->
       <tr class="clickable expandRow trackedRow"
         data-toggle="collapse"
          data-bind="attr:{'data-target': `#spell_slot_${uuid()}`}">
        <td style="width: 10%">Lvl&nbsp;<span data-bind="text: level"></span>
        </td>
       <td style="width: 10%">
         <div class="" data-bind="attr: {'class': $component.resetsOnImg($data)}"></div>
        </td>
       <td style="width: 5%">
          <mini-plus-minus params="value: used,
                    max: max, hideUp: true, onChange: ()=>{$component.onUsedChange($data)}">
          </mini-plus-minus>
        </td>
        <td style="width: 5%">
          <mini-plus-minus params="value: used,
                    max: max, hideDown: true, onChange: ()=>{$component.onUsedChange($data)}">
          </mini-plus-minus>
        </td>

        <td style=" width: auto">
          <div style="padding: 10px"
               data-bind="barProgress: $component.mapToChart({max, used, level})"> </div>
        </td>
        <td style="width: 10%"
            class="hidden-xs">
          <span
          data-bind="text: parseInt(max()) - parseInt(used())"></span>&nbsp;/&nbsp;<span
          data-bind=" text: max"></span>
        </td>
        <td style="width: 5%">
          <span data-toggle="collapse"
                data-bind="attr:{'data-target': `#spell_slot_${uuid()}`}"
                class="rotate fa fa-chevron-left"></span>
        </td>
      </tr>
      <tr class="collapseRow">
        <td colspan="8">
          <div class="collapse"
               data-bind="attr: {id:`spell_slot_${uuid()}`}">
            <spell-slot-form params="{
                data: $data,
                containerId: `spell_slot_${uuid()}`,
                flip: () => {$component.hideRow(`#spell_slot_${uuid()}`)},
                replaceInParent: $component.replaceInList,
                removeFromParent: $component.removeFromList,
                nextSlotLevel: null
             }">
            </spell-slot-form>
        </td>
      </tr>
      <!-- /ko -->
    </tbody>
    <tfoot>
      <tr class="collapseRow">
        <td colspan="7">
          <div id="add-spell-slot"
               class="collapse">
               <spell-slot-form params="{
                  containerId: 'add-spell-slot',
                   show: $component.addForm,
                   flip: $component.toggleShowAddForm,
                   addToParent: $component.addToList,
                   nextSlotLevel: $component.nextSlotLevel
                }">
               </spell-slot-form>
          </div>
          <!-- ko ifnot: $component.addForm -->
            <button type="button"
                    class="btn btn-link btn-sm btn-block"
                    id="proficiencyAddButton"
                    data-toggle="collapse"
                    data-target="#add-spell-slot"
                    data-bind="click: $component.toggleShowAddForm"><i class="fa fa-plus"></i> Add Spell Slot</button>
          <!-- /ko -->
        </td>
      </tr>
    </tfoot>
    <!-- /ko -->
  </table>
  </div>
