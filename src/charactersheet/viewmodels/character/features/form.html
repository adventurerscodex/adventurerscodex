<form data-bind="submit: $component.submit">
  <card-submit-actions params="{reset: $component.reset}"></card-submit-actions>
  <div data-bind="with: entity">
    <!-- ko if: $component.existingData -->
    <div class="h4" style="padding-top: 5px;" data-bind="text: name"></div>
    <!-- /ko -->
    <!-- ko ifnot: $component.existingData -->
    <div class="h4" style="padding-top: 5px;">
      New Feature
    </div>
    <!-- /ko -->
    <div class="form-group">
      <label for="name"
             class="control-label">Name</label>
      <!-- ko if: $component.existingData -->
      <input type="text"
             class="form-control featureEditNameInput"
             placeholder="Rage"
             required="true"
             data-bind='value: name,
             hasFocus: $component.formElementHasFocus'>
       <!-- /ko -->
       <!-- ko ifnot: $component.existingData -->
       <input type="text"
              class="form-control featureEditNameInput"
              placeholder="Rage"
              required="true"
              data-bind='value: name,
              hasFocus: $component.formElementHasFocus,
              autocomplete: {
                source: $component.featuresPrePopFilter,
                onselect: $component.populateFeature,
              delay: 350 }'>
        <!-- /ko -->
    </div>
    <div class="form-group">
      <label for="class"
             class="control-label">Class</label>
      <input type="text"
             class="form-control featureEditClassInput"
             placeholder="Barbarian"
             required="true"
             data-bind="textInput: characterClass,
             autocomplete: { source: $component.classOptions,
             onselect: $parent.populateClass }">
    </div>
    <div class="form-group">
      <label for="level"
             class="control-label">Level</label>
      <input type="number"
             class="form-control featureEditLevelInput"
             placeholder="1"
             required="true"
             data-bind='textInput: level'>
    </div>

    <div class="form-group">
      <label for="npcDescription"
             class="control-label">Description</label>
      <!-- ko if: $component.show -->
      <textarea type="text"
                rows="6"
                class="form-control"
                data-bind='value: description, markdownEditor: true'></textarea>
      <small class="text-muted">
        Text in this panel can be styled using Markdown. Click
        <a target="_blank"
          href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">here</a> to see a guide.
      </small>
      <!-- /ko -->
    </div>
    <div class="form-group">
      <input type='checkbox'
             class='ac-checkbox sr-only'
             data-bind="checked: $component.isTracked, attr: {id: `${$component.containerId}_tracked`}"></input>
      <label data-bind="attr: {for: `${$component.containerId}_tracked`}">
        Tracked?
    </label>&nbsp;<span class="fa fa-info-circle"
            style="cursor:pointer;"
            data-bind="popover: { content: $component.popoverText }"></span>
    </div>
    <!-- ko if: $component.isTracked() -->
    <form-tracked-component params="{tracked: $component.tracked}"></form-tracked-component>
    <!-- /ko -->
  </div>
    <form-submit-actions params="{
      reset: $component.reset,
      delete: $component.delete,
      addForm: $component.addForm,
      showDisclaimer: $component.showDisclaimer
    }"></form-submit-actions>
</form>
