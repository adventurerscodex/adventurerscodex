<!-- ko if: visible -->
<div class="h3">
  <img class="encounter-section-img" data-bind="attr: { src: sectionIcon }">
  Treasure<br />
  <small data-bind="text: tagline"></small>
</div>
<table class="table table-responsive table-ac-bordered table-hover">
  <thead>
    <tr>
      <th data-bind="click: function(){sortBy('name');}" class="col-xs-3">
        Name
        <span data-bind="css: sortArrow('name')"></span>
      </th>
      <th class="col-sm-3 hidden-xs">
        Property
      </th>
      <th class="col-sm-5 col-xs-8">
        Description
      </th>
      <th class="col-xs-1 text-right">
        <a data-bind="click: toggleAddModal" href="#">
          <i class="fa fa-plus fa-color"></i>
        </a>
      </th>
    </tr>
  </thead>
  <tbody>
  <!-- ko foreach: filteredAndSortedTreasure -->
    <tr class="clickable">
      <td data-bind="text: nameLabel, click: $parent.editTreasure"
          href="#" class="col-xs-3"></td>
      <td data-bind="text: propertyLabel, click: $parent.editTreasure"
          href="#" class="col-sm-3 hidden-xs"></td>
      <td data-bind="text: descriptionLabel, click: $parent.editTreasure"
          href="#" class="col-sm-5 col-xs-8"></td>
      <td class="col-xs-1 text-right">
        <a data-bind="click: $parent.removeTreasure" href="#">
          <i class="fa fa-trash-o fa-color-hover">
          </i>
        </a>
      </td>
    </tr>
    <!-- /ko -->
    <!-- ko if: filteredAndSortedTreasure().length == 0 -->
    <tr class="clickable">
      <td data-bind="click: toggleAddModal"
        colspan="12" class="text-center">
        <i class="fa fa-plus fa-color"></i>
        Add a new treasure.
      </td>
    </tr>
    <!-- /ko -->
  </tbody>
</table>
<!-- /ko -->

<!-- Add Modal -->
<div class="modal fade"
     id="addTreasure"
     tabindex="-1"
     role="dialog"
     data-bind="modal: {
      open: addModalOpen,
      onclose: addModalFinishedClosing
    }">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Add more loot to the treasure horde.</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
            <div class="form-group">
              <div class="col-sm-12">
                <div class="btn-group btn-group-justified" role="group">
                  <label class="btn btn-default btn-group-padding"
                        data-bind="css: { active: itemType() == ARMOR}">
                    <img class="action-bar-icon" data-bind="attr: { src: breastplate }">
                    <input type="radio" class="hide-block"
                      data-bind="checked: itemType, click: setTreasure"
                      name="armor" value="armor"/>Armor
                  </label>
                  <label class="btn btn-default btn-group-padding"
                        data-bind="css: { active: itemType() == COINS}">
                  <img class="action-bar-icon" data-bind="attr: { src: coins }">
                    <input type="radio" class="hide-block" data-bind="checked: itemType, click: setTreasure"
                          name="coins" value="coins"/>Coins
                  </label>
                  <label class="btn btn-default btn-group-padding"
                        data-bind="css: { active: itemType() == ITEM}">
                    <img class="action-bar-icon" data-bind="attr: { src: potion }">
                    <input type="radio" class="hide-block" data-bind="checked: itemType, click: setTreasure"
                          name="item" value="item"/>Item
                  </label>
                  <label class="btn btn-default btn-group-padding"
                        data-bind="css: { active: itemType() == MAGIC_ITEM}">
                    <img class="action-bar-icon" data-bind="attr: { src: wand }">
                    <input type="radio" class="hide-block" data-bind="checked: itemType, click: setTreasure"
                        name="magic_item" value="magic_item"/>Magic Item
                  </label>
                  <label class="btn btn-default btn-group-padding"
                        data-bind="css: { active: itemType() == WEAPON}">
                    <img class="action-bar-icon" data-bind="attr: { src: broadsword }">
                    <input type="radio" class="hide-block" data-bind="checked: itemType, click: setTreasure"
                          name="weapon" value="weapon"/>Weapon
                  </label>
                </div>
              </div>
          </div>
          <!-- ko if: blankTreasure() -->
          <!--ko if: armorShow()-->
            <div data-bind="template: { name: 'armorTemplate' }"></div>
          <!--/ko-->

          <!--ko if: coinsShow()-->
            <div data-bind="template: { name: 'coinsTemplate' }"></div>
          <!--/ko-->

          <!--ko if: itemShow()-->
            <div data-bind="template: { name: 'itemTemplate' }"></div>
          <!--/ko-->

          <!--ko if: magicItemShow()-->
            <div data-bind="template: { name: 'magicItemTemplate' }"></div>
          <!--/ko-->

          <!--ko if: weaponShow()-->
            <div data-bind="template: { name: 'weaponTemplate' }"></div>
          <!--/ko-->
          <!--/ko-->

          <div class="modal-footer">
            <!-- ko if: showAddButton -->
            <button type="button"
                    class="btn btn-primary"
                    data-bind="click: addTreasure">
                    Add
            </button>
            <!-- /ko -->
            <p class="text-muted text-left" data-bind="visible: shouldShowDisclaimer">
              <sm><i>This data is distributed under the
                <a href="http://media.wizards.com/2016/downloads/DND/SRD-OGL_V5.1.pdf"
                  target="_blank">
                  OGL</a><br/>
                  Open  Game  License v 1.0a  Copyright 2000, Wizards of  the Coast,  LLC.
                </i>
              </sm>
            </p>
          </div>
        </form>
      </div> <!-- Modal Body -->
    </div> <!-- Modal Content -->
  </div> <!-- Modal Dialog -->
</div> <!-- Modal Fade -->

<!-- ViewEdit Modal -->
<div class="modal fade"
     id="viewTreasure"
     tabindex="-1"
     role="dialog"
     data-bind="modal: {
      open: openModal,
      onopen: modalFinishedOpening,
      onclose: closeModal
    }">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Edit your treasure horde.</h4>
      </div>
      <div class="modal-body">
        <!-- Begin Tabs -->
        <ul class="nav nav-tabs tabs">
          <li role="presentation" data-bind="click: selectPreviewTab, css: previewTabStatus">
            <a href="#" aria-controls="treasureModalPreview" role="tab" data-toggle="tab">
                <b>Preview</b>
            </a>
          </li>
          <li role="presentation" data-bind="click: selectEditTab, css: editTabStatus">
            <a href="#" aria-controls="treasureModalEdit" role="tab" data-toggle="tab">
                <b>Edit</b>
            </a>
          </li>
        </ul>
        <div class="tab-content" data-bind="with: currentEditItem">
          <div role="tabpanel" data-bind="css: $parent.previewTabStatus" class="tab-pane">

            <!--ko if: type() == $parent.ARMOR-->
             <div data-bind="template: { name: 'armorPreviewTemplate' }"></div>
            <!--/ko-->

            <!--ko if: type() == $parent.COINS-->
             <div data-bind="template: { name: 'coinsPreviewTemplate' }"></div>
            <!--/ko-->

            <!--ko if: type() == $parent.ITEM-->
             <div data-bind="template: { name: 'itemPreviewTemplate' }"></div>
            <!--/ko-->

            <!--ko if: type() == $parent.MAGIC_ITEM-->
             <div data-bind="template: { name: 'magicItemPreviewTemplate' }"></div>
            <!--/ko-->

            <!--ko if: type() == $parent.WEAPON-->
             <div data-bind="template: { name: 'weaponPreviewTemplate' }"></div>
            <!--/ko-->

          </div> <!-- End Preview Tab -->
          <div role="tabpanel" data-bind="css: $parent.editTabStatus" class="tab-pane">
            <form class="form-horizontal" data-bind="validate: $parent.updateValidation">

              <!--ko if: type() == $parent.ARMOR-->
               <div data-bind="template: { name: 'armorEditTemplate' }"></div>
              <!--/ko-->

              <!--ko if: type() == $parent.COINS-->
               <div data-bind="template: { name: 'coinsEditTemplate' }"></div>
              <!--/ko-->

              <!--ko if: type() == $parent.ITEM-->
               <div data-bind="template: { name: 'itemEditTemplate' }"></div>
              <!--/ko-->

              <!--ko if: type() == $parent.MAGIC_ITEM-->
               <div data-bind="template: { name: 'magicItemEditTemplate' }"></div>
              <!--/ko-->

              <!--ko if: type() == $parent.WEAPON-->
               <div data-bind="template: { name: 'weaponEditTemplate' }"></div>
              <!--/ko-->

              <div class="modal-footer">
                <button type="submit"
                        class="btn btn-primary">
                        Done
                </button>
              </div>
            </form>
          </div>
        </div>
      </div> <!-- Modal Body -->
    </div> <!-- Modal Content -->
  </div> <!-- Modal Dialog -->
</div> <!-- Modal Fade -->

<!-- Add templates -->
<script type="text/html" id="armorTemplate">
  <form class="form-horizontal" data-bind="validate: armorValidation">
    <div class="form-group ui-front">
      <label for="armorName"
            class="col-sm-2 control-label">Armor</label>
      <div class="col-sm-10">
        <input type="text"
              class="form-control"
              name="name"
              id="armorName"
              placeholder="Chain Mail"
              data-bind='textInput: blankTreasure().name, hasFocus: armorFirstElementFocus,
                autocomplete: { source: treasurePrePopFilter, onselect: populateTreasure }'>
      </div>
    </div>
    <div class="form-group ui-front">
      <label for="armorType"
            class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Light"
                name="type"
                data-bind="textInput: blankTreasure().type, autocomplete: { source: blankTreasure().armorTypeOptions,
                onselect: setArmorType }">
        </div>
    </div>
    <div class="form-group">
      <label for="armorMagicalModifier"
            class="col-sm-2 control-label">Magical Modifier</label>
        <div class="col-sm-10">
        <input type="number"
              class="form-control"
              name="magicalModifier"
              id="armorMagicalModifier"
              data-bind='textInput: blankTreasure().magicalModifier'>
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="armorPrice"
            class="col-sm-2 control-label">Price</label>
      <div class="col-sm-10">
        <div class="input-group override-tight-inner">
          <input type="text"
              class="form-control input-jquery-addon"
              name="price"
              id="armorPrice"
              placeholder="5"
              data-bind='textInput: blankTreasure().price'>
          <span class="input-group-addon input-group-addon-jquery">
            <input class="form-control"
                  placeholder="GP"
                  name="currencyDenomination"
                  data-bind="textInput: blankTreasure().currencyDenomination, autocomplete: {
                            source: blankTreasure().armorCurrencyDenominationOptions,
                            onselect: setArmorCurrencyDenomination }">
          </span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="armorWeight"
            class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="number"
                class="form-control"
                name="weight"
                id="armorWeight"
                placeholder="6"
                data-bind='textInput: blankTreasure().weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="armorClass"
            class="col-sm-2 control-label">Armor Class</label>
        <div class="col-sm-10">
          <input type="number"
                class="form-control"
                name="armorClass"
                id="armorClass"
                placeholder="3"
                data-bind='textInput: blankTreasure().armorClass'>
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="armorSize"
            class="col-sm-2 control-label">Stealth</label>
        <div class="col-sm-10">
        <input class="form-control"
              placeholder="Advantage"
              name="stealth"
              data-bind="textInput: blankTreasure().stealth, autocomplete: { source: blankTreasure().armorStealthOptions,
              onselect: setArmorStealth }">
        </div>
    </div>
    <div class="form-group">
      <label for="armorDescription"
            class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    name="description"
                    id="armorDescription"
                    rows="4"
                    placeholder="Armor of damage blocking"
                    data-bind='textInput: blankTreasure().description'>
          </textarea>
        </div>
    </div>
  </form>
</script>

<script type="text/html" id="coinsTemplate">
  <form class="form-horizontal" data-bind="validate: wealthValidation">
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: ppCoin }" width="30px" title="Platinum Coins" alt="Platinum Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="platinum"
                data-bind='value: blankTreasure().platinum, hasFocus: coinsFirstElementFocus'/>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: gpCoin }" width="30px" title="Gold Coins" alt="Gold Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="gold"
                data-bind='value: blankTreasure().gold'/>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: epCoin }" width="30px" title="Electrum Coins" alt="Electrum Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="electrum"
                data-bind='value: blankTreasure().electrum'>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: spCoin }" width="30px" title="Silver Coins" alt="Silver Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="silver"
                data-bind='value: blankTreasure().silver'>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
          <img data-bind="attr: { src: cpCoin }" width="30px" title="Copper Coins" alt="Copper Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="copper"
                data-bind='value: blankTreasure().copper'>
      </div>
    </div>
  </form>
</script>

<script type="text/html" id="itemTemplate">
  <form class="form-horizontal" data-bind="validate: itemValidation">
    <div class="form-group ui-front">
     <label for="itemName"
       class="col-sm-2 control-label">Name</label>
     <div class="col-sm-10">
       <input type="text"
         class="form-control"
         name="name"
         id="itemName"
         placeholder="Rations"
         data-bind='textInput: blankTreasure().name, hasFocus: itemFirstElementFocus,
            autocomplete: { source: treasurePrePopFilter, onselect: populateTreasure }'>
     </div>
   </div>
   <div class="form-group">
     <label for="itemWeight"
       class="col-sm-2 control-label">Weight</label>
     <div class="col-sm-10">
       <div class="input-group override-tight-inner">
         <input type="number"
                class="form-control"
                name="weight"
                placeholder="12"
                data-bind='textInput: blankTreasure().weight'>
           <span class="input-group-addon">lbs.</span>
       </div>
     </div>
   </div>
   <div class="form-group">
     <label for="itemQuantity"
       class="col-sm-2 control-label">Quantity</label>
     <div class="col-sm-10">
       <input type="number"
         class="form-control"
         name="quantity"
         id="itemQuantity"
         placeholder="1"
         data-bind='textInput: blankTreasure().quantity'>
     </div>
   </div>
   <div class="form-group ui-front">
     <label
       class="col-sm-2 control-label">Cost</label>
     <div class="col-sm-10">
       <div class="input-group override-tight-inner">
       <input type="number"
         name="cost"
         class="form-control input-jquery-addon"
         data-bind="value: blankTreasure().cost" />
       <span class="input-group-addon input-group-addon-jquery">
         <input class="form-control"
                name="currencyDenomination"
                placeholder="GP"
                data-bind="textInput: blankTreasure().currencyDenomination, autocomplete: {
                          source: blankTreasure().itemCurrencyDenominationOptions,
                          onselect: setItemCurrencyDenomination }">
        </span>
       </div>
      </div>
   </div>
   <div class="form-group">
     <label for="itemDescription"
       class="col-sm-2 control-label">Description</label>
     <div class="col-sm-10">
       <textarea type="password"
         class="form-control"
         name="description"
         id="itemDescription"
         placeholder="Rations consist of..."
         rows="4"
         data-bind='textInput: blankTreasure().description'>
       </textarea>
     </div>
   </div>
  </form>
</script>

<script type="text/html" id="magicItemTemplate">
  <form class="form-horizontal" data-bind="validate: magicItemValidation">
    <div class="form-group ui-front">
      <label for="magicItemName"
             class="col-sm-2 control-label">Item</label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               name="name"
               id="magicItemName"
               placeholder="Dagger of Venom"
               data-bind='textInput: blankTreasure().name, hasFocus: magicItemFirstElementFocus,
                  autocomplete: { source: treasurePrePopFilter, onselect: populateTreasure }'>
      </div>
    </div>
    <div class="form-group ui-front">
      <label for="magicItemType"
             class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
               name="type"
               placeholder="Wand"
               data-bind="textInput: blankTreasure().magicItemType,
                         autocomplete: { source: blankTreasure().magicItemTypeOptions,
                                         onselect: setMagicItemType }">
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="magicItemType"
             class="col-sm-2 control-label">Rarity</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="Legendary"
               name="rarity"
               data-bind="textInput: blankTreasure().rarity,
                         autocomplete: { source: blankTreasure().magicItemRarityOptions,
                                         onselect: setMagicItemRarity }">
        </div>
    </div>
    <div class="form-group">
      <label for="magicItemMaxCharges"
             class="col-sm-2 control-label">Max Charges</label>
        <div class="col-sm-10">
          <input type="number"
                 class="form-control"
                 name="maxCharges"
                 id="magicItemMaxCharges"
                 placeholder="1"
                 data-bind='textInput: blankTreasure().maxCharges'>
        </div>
    </div>
    <div data-bind="visible: blankTreasure().maxCharges() != 0">
      <div class="form-group">
        <label for="magicItemCharges"
               class="col-sm-2 control-label">Charges</label>
          <div class="col-sm-10">
            <input type="number"
                   class="form-control"
                   name="usedCharges"
                   id="magicItemCharges"
                   placeholder="1"
                   data-bind='textInput: blankTreasure().usedCharges'>
          </div>
      </div>
    </div>
    <div class="form-group">
      <label for="magicItemWeight"
             class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="number"
                 class="form-control"
                 name="weight"
                 id="magicItemWeight"
                 placeholder="1"
                 data-bind='textInput: blankTreasure().weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="magicItemRequiresAttunement"
             class="col-sm-2 control-label">Requires Attunement</label>
        <div class="col-sm-10">
          <input type="checkbox"
                 class="form-control"
                 id="magicItemRequiresAttunement"
                 data-bind='checked: blankTreasure().requiresAttunement'>
        </div>
    </div>
    <div data-bind="visible: blankTreasure().requiresAttunement() == true">
      <div class="form-group">
        <label for="magicItemAttuned"
               class="col-sm-2 control-label">Attuned</label>
          <div class="col-sm-10">
            <input type="checkbox"
                   class="form-control"
                   id="magicItemAttuned"
                   data-bind='checked: blankTreasure().attuned'>
          </div>
      </div>
    </div>
    <div class="form-group">
      <label for="magicItemDescription"
             class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    name="description"
                    id="magicItemDescription"
                    rows="4"
                    placeholder="Awesome stuff goes here"
                    data-bind='textInput: blankTreasure().description'>
          </textarea>
        </div>
    </div>
  </form>
</script>

<script type="text/html" id="weaponTemplate">
  <form class="form-horizontal" data-bind="validate: weaponValidation">
    <div class="form-group ui-front">
      <label for="weaponName"
             class="col-sm-2 control-label">Name</label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               name="name"
               id="weaponName"
               placeholder="Short Sword"
               data-bind='textInput: blankTreasure().name, hasFocus: weaponFirstElementFocus,
                 autocomplete: { source: treasurePrePopFilter, onselect: populateTreasure }'>
      </div>
    </div>
    <div class="form-group">
      <label for="weaponDmg"
             class="col-sm-2 control-label">Damage</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 name="damage"
                 id="weaponDmg"
                 placeholder="1D4"
                 data-bind='textInput: blankTreasure().damage'>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponHit"
             class="col-sm-2 control-label">Magical Modifier</label>
      <div class="col-sm-10">
        <input type="number" class="form-control"
               id="weaponHit"
               name="toHitModifier"
               placeholder="Place hit bonus here"
               data-bind='textInput: blankTreasure().toHitModifier'>
      </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponType"
             class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="Ranged"
               name="type"
               data-bind="textInput: blankTreasure().weaponType, autocomplete: {
                          source: blankTreasure().weaponTypeOptions,
                          onselect: setWeaponType }">
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponHandedness"
             class="col-sm-2 control-label">Handedness</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="One-Handed"
                name="handedness"
                data-bind="textInput: blankTreasure().handedness, autocomplete: {
                          source: blankTreasure().weaponHandednessOptions,
                          onselect: setWeaponHandedness }">
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponProficiency"
             class="col-sm-2 control-label">Proficiency</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Simple"
                name="proficiency"
                data-bind="textInput: blankTreasure().proficiency, autocomplete: {
                          source: blankTreasure().weaponProficiencyOptions,
                          onselect: setWeaponProficiency }">
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponPrice"
             class="col-sm-2 control-label">Price</label>
      <div class="col-sm-10">
        <div class="input-group override-tight-inner">
          <input type="number" class="form-control input-jquery-addon"
               id="weaponPrice"
               name="price"
               placeholder="5"
               data-bind='textInput: blankTreasure().price'>
               <span data-bind="console.log($parent.id)"></span>
           <span class="input-group-addon input-group-addon-jquery">
            <input class="form-control"
                   placeholder="GP"
                   name="currencyDenomination"
                   data-bind="textInput: blankTreasure().currencyDenomination, autocomplete: {
                          source: blankTreasure().weaponCurrencyDenominationOptions,
                          onselect: setWeaponCurrencyDenomination }">
          </span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="weaponWeight"
             class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="number" class="form-control"
                 id="weaponWeight"
                 name="weight"
                 placeholder="6"
                 data-bind='textInput: blankTreasure().weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponRange"
             class="col-sm-2 control-label">Range</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 name="range"
                 id="weaponRange"
                 placeholder="25/100"
                 data-bind='textInput: blankTreasure().range'>
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponDamageType"
             class="col-sm-2 control-label">Damage Type</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="Fire"
               name="damageType"
               data-bind="textInput: blankTreasure().damageType, autocomplete: {
                          source: blankTreasure().weaponDamageTypeOptions,
                          onselect: setWeaponDamageType }">
        </div>
    </div>
    <div class="form-group ui-front">
      <label for="weaponProperty"
             class="col-sm-2 control-label">Property</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Finesse"
                name="property"
                data-bind="textInput: blankTreasure().property, autocomplete: {
                          source: blankTreasure().weaponPropertyOptions,
                          onselect: setWeaponProperty }">
        </div>
    </div>
    <div class="form-group">
      <label for="weaponQuantity"
             class="col-sm-2 control-label">Quantity</label>
        <div class="col-sm-10">
          <input type="number" class="form-control"
                 id="weaponQuantity"
                 name="quantity"
                 placeholder="1"
                 data-bind='textInput: blankTreasure().quantity'>
        </div>
    </div>

    <div class="form-group">
      <label for="weaponDescription"
             class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    name="description"
                    id="weaponDescription"
                    rows="4"
                    placeholder="A sword...that is short..."
                    data-bind='textInput: blankTreasure().description'>
          </textarea>
        </div>
    </div>
  </form>
</script>

<!-- Preview Templates -->
<script type="text/html" id="armorPreviewTemplate">
  <div class="h3">
    <span data-bind="text: name"></span>&nbsp;
    <small data-bind="text: armorSummaryLabel"></small>
  </div>

  <hr />
  <div class="row">
    <div class="col-sm-4 col-xs-12"><b>Stealth:</b>&nbsp;<span data-bind="text: stealth"></span></div>
    <div class="col-sm-4 col-xs-12"><b>Weight:</b>&nbsp;<span data-bind="text: armorWeightLabel"></span></div>
    <div class="col-sm-4 col-xs-12"><b>Type:</b>&nbsp;<span data-bind="text: armorType"></span></div>
  </div>

  <hr />
  <h4>Description</h4>
  <div class="row row-padded">
    <div class="col-xs-12 col-padded">
      <div data-bind="html: armorDescriptionHTML"
           class="preview-modal-overflow">
      </div>
    </div>
  </div>
</script>

<script type="text/html" id="coinsPreviewTemplate">
  <div class="h3">
    <span>Coins</span>&nbsp;
  </div>
  <hr />
  <div class="row">
    <div class="col-sm-6 col-xs-12"><b>Platinum:</b>&nbsp;<span data-bind="text: platinum"></span></div>
    <div class="col-sm-6 col-xs-12"><b>Gold:</b>&nbsp;<span data-bind="text: gold"></span></div>
    <div class="col-sm-6 col-xs-12"><b>Electrum:</b>&nbsp;<span data-bind="text: electrum"></span></div>
    <div class="col-sm-6 col-xs-12"><b>Silver:</b>&nbsp;<span data-bind="text: silver"></span></div>
    <div class="col-sm-6 col-xs-12"><b>Copper:</b>&nbsp;<span data-bind="text: copper"></span></div>
  </div>
  <hr />
  <h4>Description</h4>
  <div class="row row-padded">
    <div class="col-sm-12 col-xs-12">
      Total worth in Gold: <span data-bind="text: worthInGold"></span>
    </div>
    <div class="col-sm-12 col-xs-12">
      Total Weight: <span data-bind="text: totalWeightLabel"></span>
    </div>
  </div>
</script>

<script type="text/html" id="itemPreviewTemplate">
  <div class="h3">
    <span data-bind="text: name"></span>&nbsp;
  </div>
  <hr />
  <div class="row">
    <div class="col-sm-6 col-xs-12"><b>Weight:</b>&nbsp;<span data-bind="text: itemWeightLabel"></span></div>
    <div class="col-sm-6 col-xs-12"><b>Quantity:</b>&nbsp;<span data-bind="text: quantity"></span></div>
  </div>
  <hr />
  <h4>Description</h4>
  <div class="row row-padded">
    <div class="col-xs-12 col-padded">
      <div data-bind="html: itemDescriptionHTML"
           class="preview-modal-overflow">
      </div>
    </div>
  </div>
</script>

<script type="text/html" id="magicItemPreviewTemplate">
    <div class="h3">
      <span data-bind="text: magicItemNameLabel"></span>&nbsp;
      <small data-bind="text: rarity"></small>
    </div>
    <hr />
    <div class="row">
      <div class="col-sm-4 col-xs-12"><b>Type:</b>&nbsp;<span data-bind="text: magicItemType"></span></div>
      <div class="col-sm-4 col-xs-12"><b>Weight:</b>&nbsp;<span data-bind="text: magicItemWeightLabel"></span></div>
      <div class="col-sm-4 col-xs-12"><b>Max Charges:</b>&nbsp;<span data-bind="text: maxCharges"></span></div>
    </div>
    <hr />
    <h4>Description</h4>
    <div class="row row-padded">
      <div class="col-xs-12 col-padded">
        <div data-bind="html: magicItemDescriptionHTML"
             class="preview-modal-overflow">
        </div>
      </div>
    </div>
</script>

<script type="text/html" id="weaponPreviewTemplate">
    <div class="h3">
      <span data-bind="text: name"></span>
      <small data-bind="text: magicalModifierLabel"></small>
    </div>
    <hr />
    <div class="row">
      <div class="col-sm-6 col-xs-12"><b>Damage:</b>&nbsp;<span data-bind="text: damage"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Range:</b>&nbsp;<span data-bind="text: weaponRangeLabel"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Type:</b>&nbsp;<span data-bind="text: weaponType"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Weight:</b>&nbsp;<span data-bind="text: weaponWeightLabel"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Damage Type:</b>&nbsp;<span data-bind="text: damageType"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Proficiency:</b>&nbsp;<span data-bind="text: proficiency"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Handedness:</b>&nbsp;<span data-bind="text: handedness"></span></div>
      <div class="col-sm-6 col-xs-12"><b>Property:</b>&nbsp;<span data-bind="text: property"></span></div>
    </div>
    <hr />
    <h4>Description</h4>
    <div class="row row-padded">
      <div class="col-xs-12 col-padded">
        <div data-bind="html: weaponDescriptionHTML"
             class="preview-modal-overflow">
        </div>
      </div>
    </div>
</script>

<!-- Edit Templates -->
<script type="text/html" id="armorEditTemplate">
  <form class="form-horizontal" data-bind="validate: $parent.armorUpdateValidation">
    <div class="form-group">
      <label for="armorName"
             class="col-sm-2 control-label">Name</label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               id="armorName"
               name="name"
               placeholder="Chain Mail"
               data-bind='textInput: name, hasFocus: $parent.editFirstModalElementHasFocus'>
      </div>
    </div>
    <div class="form-group">
      <label for="armorType"
             class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="Light"
               name="type"
               data-bind="textInput: armorType">
        </div>
    </div>
    <div class="form-group">
      <label for="armorMagicalModifier"
             class="col-sm-2 control-label">Magical Modifier</label>
        <div class="col-sm-10">
        <input type="number" class="form-control"
               id="armorMagicalModifier"
               name="magicalModifier"
               data-bind='textInput: magicalModifier'>
        </div>
    </div>
    <div class="form-group">
      <label for="armorPrice"
             class="col-sm-2 control-label">Price</label>
      <div class="col-sm-10">
        <div class="input-group override-tight-inner">
          <input type="text"
               class="form-control input-jquery-addon"
               id="armorPrice"
               name="price"
               placeholder="5"
               data-bind='textInput: price'>
           <span class="input-group-addon input-group-addon-jquery">
            <input class="form-control"
                   placeholder="GP"
                   name="currencyDenomination"
                   data-bind="textInput: currencyDenomination">
          </span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="armorWeight"
             class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 id="armorWeight"
                 name="weight"
                 placeholder="6"
                 data-bind='textInput: weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="armorClass"
             class="col-sm-2 control-label">Armor Class</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 name="armorClass"
                 id="armorClass"
                 placeholder="3"
                 data-bind='textInput: armorClass'>
        </div>
    </div>
    <div class="form-group">
      <label for="armorSize"
             class="col-sm-2 control-label">Stealth</label>
        <div class="col-sm-10">
        <input class="form-control"
               name="stealth"
               placeholder="Advantage"
               data-bind="textInput: stealth">
        </div>
    </div>
    <div class="form-group">
      <label for="armorDescription"
             class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    name="description"
                    id="armorDescription"
                    rows="4"
                    placeholder="Armor of damage blocking"
                    data-bind='textInput: description'>
          </textarea>
        </div>
    </div>
  </form>
</script>

<script type="text/html" id="coinsEditTemplate">
  <form class="form-horizontal" data-bind="validate: $parent.wealthUpdateValidation">
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: $parent.ppCoin }" width="30px" title="Platinum Coins" alt="Platinum Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="platinum"
                data-bind='value: platinum, hasFocus: $parent.editFirstModalElementHasFocus'/>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: $parent.gpCoin }" width="30px" title="Gold Coins" alt="Gold Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="gold"
                data-bind='value: gold'/>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: $parent.epCoin }" width="30px" title="Electrum Coins" alt="Electrum Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="electrum"
                data-bind='value: electrum'>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
        <img data-bind="attr: { src: $parent.spCoin }" width="30px" title="Silver Coins" alt="Silver Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="silver"
                data-bind='value: silver'>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2">
          <img data-bind="attr: { src: $parent.cpCoin }" width="30px" title="Copper Coins" alt="Copper Coins"/>
      </label>
      <div class="col-sm-10">
        <input type="number"
                class="form-control"
                name="copper"
                data-bind='value: copper'>
      </div>
    </div>
  </form>
</script>

<script type="text/html" id="itemEditTemplate">
  <form class="form-horizontal" data-bind="validate: $parent.itemUpdateValidation">
    <div class="form-group">
      <label for="itemName"
             class="col-sm-2 control-label">Name
      </label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               name="name"
               id="itemName"
               placeholder="Rations"
               data-bind='textInput: name, hasFocus: $parent.editFirstModalElementHasFocus'>
      </div>
    </div>
    <div class="form-group">
      <label for="itemWeight"
             class="col-sm-2 control-label">Weight</label>
      <div class="col-sm-10">
        <div class="input-group override-tight-inner">
          <input type="number"
                 class="form-control"
                 name="weight"
                 placeholder="Item Weight"
                 data-bind='textInput: weight'>
          <span class="input-group-addon">lbs.</span>
        </div>
       </div>
    </div>
    <div class="form-group">
      <label for="itemQuantity"
             class="col-sm-2 control-label">Quantity</label>
      <div class="col-sm-10">
        <input type="number"
               class="form-control"
               name="quantity"
               id="itemQuantity"
               placeholder="Item Quantity"
               data-bind='textInput: quantity'>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">Cost</label>
        <div class="col-sm-10">
          <div class="input-group override-tight-inner">
            <input type="number"
                   name="cost"
                   class="form-control input-jquery-addon"
                   data-bind="value: cost" />
            <span class="input-group-addon input-group-addon-jquery">
            <input class="form-control"
                    placeholder="GP"
                    name="currencyDenomination"
                    data-bind="textInput: currencyDenomination">
            </span>
          </div>
        </div>
    </div>
    <div class="form-group">
      <label for="itemDescription"
             class="col-sm-2 control-label">Description</label>
      <div class="col-sm-10">
        <textarea type="password"
                  class="form-control"
                  name="description"
                  id="itemDescription"
                  placeholder="Rations consist of..."
                  rows="4"
                  data-bind='textInput: description'>
        </textarea>
      </div>
    </div>
  </form>
</script>

<script type="text/html" id="magicItemEditTemplate">
  <form class="form-horizontal" data-bind="validate: $parent.magicItemUpdateValidation">
    <div class="form-group">
      <label for="magicItemName"
             class="col-sm-2 control-label">Name</label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               name="name"
               id="magicItemName"
               placeholder="Dagger of Venom"
               data-bind='textInput: name, hasFocus: $parent.editFirstModalElementHasFocus'>
      </div>
    </div>
    <div class="form-group">
      <label for="magicItemType"
             class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Wand"
                name="type"
                data-bind="textInput: magicItemType">
        </div>
    </div>
    <div class="form-group">
      <label for="magicItemType"
             class="col-sm-2 control-label">Rarity</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Legendary"
                name="rarity"
                data-bind="textInput: rarity">
        </div>
    </div>
    <div class="form-group">
      <label for="magicItemMaxCharges"
             class="col-sm-2 control-label">Max Charges</label>
        <div class="col-sm-10">
          <input type="number"
                 class="form-control"
                 id="magicItemMaxCharges"
                 placeholder="1"
                 name="maxCharges"
                 data-bind='textInput: maxCharges'>
        </div>
    </div>
    <div data-bind="visible: maxCharges() != 0">
      <div class="form-group">
        <label for="magicItemCharges"
               class="col-sm-2 control-label">Charges</label>
          <div class="col-sm-10">
            <input type="number"
                   class="form-control"
                   id="magicItemCharges"
                   placeholder="1"
                   name="usedCharges"
                   data-bind='textInput: usedCharges'>
          </div>
      </div>
    </div>
    <div class="form-group">
      <label for="magicItemWeight"
             class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="number"
                 class="form-control"
                 id="magicItemWeight"
                 placeholder="1"
                 name="weight"
                 data-bind='textInput: weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="magicItemRequiresAttunement"
             class="col-sm-2 control-label">Requires Attunement</label>
        <div class="col-sm-10">
          <input type="checkbox"
                 class="form-control"
                 name="requiresAttunement"
                 id="magicItemRequiresAttunement"
                 data-bind='checked: requiresAttunement'>
        </div>
    </div>
    <div data-bind="visible: requiresAttunement() == true">
      <div class="form-group">
        <label for="magicItemAttuned"
               class="col-sm-2 control-label">Attuned</label>
          <div class="col-sm-10">
            <input type="checkbox"
                   class="form-control"
                   name="attuned"
                   id="magicItemAttuned"
                   data-bind='checked: attuned'>
          </div>
      </div>
    </div>
    <div class="form-group">
      <label for="magicItemDescription"
             class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    name="description"
                    id="magicItemDescription"
                    rows="4"
                    placeholder="Awesome stuff goes here"
                    data-bind='textInput: description'>
          </textarea>
        </div>
    </div>
  </form>
</script>

<script type="text/html" id="weaponEditTemplate">
  <form class="form-horizontal" data-bind="validate: $parent.weaponUpdateValidation">
    <div class="form-group">
      <label for="weaponName"
             class="col-sm-2 control-label">Name</label>
      <div class="col-sm-10">
        <input type="text"
               class="form-control"
               name="name"
               id="weaponName"
               placeholder="Short Sword"
               data-bind='textInput: name, hasFocus: $parent.editFirstModalElementHasFocus'>
      </div>
    </div>
    <div class="form-group">
      <label for="weaponDmg"
             class="col-sm-2 control-label">Damage</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 name="damage"
                 id="weaponDmg"
                 placeholder="1D4"
                 data-bind='textInput: damage'>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponHit"
             class="col-sm-2 control-label">Magical Modifier</label>
      <div class="col-sm-10">
        <input type="number" class="form-control"
               id="weaponHit"
               name="toHitModifier"
               placeholder="Place hit bonus here"
               data-bind='textInput: toHitModifier'>
      </div>
    </div>
    <div class="form-group">
      <label for="weaponType"
             class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Ranged"
                name="type"
                data-bind="textInput: weaponType">
        </div>
    </div>
    <div class="form-group">
      <label for="weaponHandedness"
             class="col-sm-2 control-label">Handedness</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="One-Handed"
               name="handedness"
              data-bind="textInput: handedness"></select>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponProficiency"
             class="col-sm-2 control-label">Proficiency</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Simple"
                name="proficiency"
                data-bind="textInput: proficiency">
        </div>
    </div>
    <div class="form-group">
      <label for="weaponPrice"
             class="col-sm-2 control-label">Price</label>
      <div class="col-sm-10">
        <div class="input-group override-tight-inner">
          <input type="number" class="form-control input-jquery-addon"
               id="weaponPrice"
               placeholder="5"
               name="price"
               data-bind='textInput: price'>
           <span class="input-group-addon input-group-addon-jquery">
            <input class="form-control"
                   placeholder="GP"
                   name="currencyDenomination"
                   data-bind="textInput: currencyDenomination">
          </span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="weaponWeight"
             class="col-sm-2 control-label">Weight</label>
        <div class="col-sm-10">
          <input type="number" class="form-control"
                 id="weaponWeight"
                 name="weight"
                 placeholder="6"
                 data-bind='textInput: weight'>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponRange"
             class="col-sm-2 control-label">Range</label>
        <div class="col-sm-10">
          <input type="text"
                 class="form-control"
                 id="weaponRange"
                 name="range"
                 placeholder="25/100"
                 data-bind='textInput: range'>
        </div>
    </div>
    <div class="form-group">
      <label for="weaponDamageType"
             class="col-sm-2 control-label">Damage Type</label>
        <div class="col-sm-10">
        <input class="form-control"
               placeholder="Fire"
               name="damageType"
               data-bind="textInput: damageType">
        </div>
        </div>
      <div class="form-group">
      <label for="weaponProperty"
             class="col-sm-2 control-label">Property</label>
        <div class="col-sm-10">
        <input class="form-control"
                placeholder="Finesse"
                name="property"
                data-bind="textInput: property">
        </div>
    </div>

    <div class="form-group">
      <label for="weaponQuantity"
             class="col-sm-2 control-label">Quantity</label>
        <div class="col-sm-10">
          <input type="number" class="form-control"
                 id="weaponQuantity"
                 placeholder="1"
                 name="quantity"
                 data-bind='textInput: quantity'>
        </div>
    </div>

    <div class="form-group">
      <label for="weaponDescription"
             class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea type="password"
                    class="form-control"
                    id="weaponDescription"
                    name="description"
                    rows="4"
                    placeholder="A sword...that is short..."
                    data-bind='textInput: description'>
          </textarea>
        </div>
    </div>
  </form>
</script>
