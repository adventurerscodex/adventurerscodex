<form data-bind="submit: submit, with: entity().value" autocomplete="off">
  <card-submit-actions params="{reset: $component.reset}"></card-submit-actions>
  <!-- ko if: $component.addForm -->
  <div class="h4 collapsable-card-title">New Weapon</div>
  <!-- /ko -->
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Name</label>
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          name="name"
          placeholder="Short Sword"
          data-bind="
            textInput: name,
            hasFocus: $component.formElementHasFocus,
            event: { blur: $component.reviewInput, invalid: $component.invalidate },
            attr: { ...$component.validation.name },
            autocomplete: {
              source: $component.prePopFilter,
              onselect: $component.populate,
            }
          "
        />
        <div class="input-group-btn">
          <button
            class="btn btn-info btn-sm dropdown-toggle"
            type="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <!-- ko if: includeInAutoComplete -->
            <i class="fa fa-star" aria-hidden="true"></i> <span class="caret"></span>
            <!-- /ko -->
            <!-- ko ifnot: includeInAutoComplete -->
            <i class="fa fa-star-o" aria-hidden="true"></i> <span class="caret"></span>
            <!-- /ko -->
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <a href="#" data-bind="click: toggleAutoCompleteStatus">
                <!-- ko ifnot: includeInAutoComplete -->
                <i class="fa fa-star"></i>&nbsp;Add to Auto-Complete
                <!-- /ko -->
                <!-- ko if: includeInAutoComplete -->
                <i class="fa fa-star-o"></i>&nbsp;Remove from Auto-Complete
                <!-- /ko -->
              </a>
            </li>
          </ul>
        </div>
      </div>
      <!-- ko if: $component.addForm -->
      <compendium-help />
      <!-- /ko -->
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Damage</label>
      <input
        type="text"
        class="form-control"
        name="damage"
        placeholder="1D4"
        data-bind="
          textInput: damage,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.damage },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Magical Modifier</label>
      <input
        type="number"
        class="form-control"
        name="toHitModifier"
        placeholder="0"
        data-bind="
          value: magicalModifier,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.toHitModifier },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Type</label>
      <input
        type="text"
        class="form-control"
        name="damage"
        placeholder="Acid"
        data-bind="
          textInput: type,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.type },
          autocomplete: {
            source: $component.typeOptions,
            onselect: $component.setType,
          }
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Handedness</label>
      <input
        type="text"
        class="form-control"
        name="damage"
        placeholder="One-Handed"
        data-bind="
          textInput: handedness,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.handedness },
          autocomplete: {
            source: $component.handednessOptions,
            onselect: $component.setHandedness,
          }
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Proficiency</label>
      <input
        type="text"
        class="form-control"
        name="proficiency"
        placeholder="Simple"
        data-bind="
          textInput: handedness,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.proficiency },
          autocomplete: {
            source: $component.proficiencyOptions,
            onselect: $component.setProficiency,
          }
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Price</label>
      <div class="input-group override-tight-inner">
        <input
          type="text"
          class="form-control input-jquery-addon"
          name="price"
          placeholder="5"
          data-bind="
            value: price,
            event: { blur: $component.reviewInput, invalid: $component.invalidate },
            attr: { ...$component.validation.price },
          "
        />
        <span class="input-group-addon input-group-addon-sm input-group-addon-jquery">
          <input
            class="form-control"
            placeholder="GP"
            name="currencyDenomination"
            data-bind="
              value: currencyDenomination,
              event: { blur: $component.reviewInput, invalid: $component.invalidate },
              attr: { ...$component.validation.currencyDenomination },
              autocomplete: {
                source: $component.currencyDenominationOptions,
                onselect: $component.setCurrencyDenomination
              },
            "
          />
        </span>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Weight</label>
      <input
        type="text"
        class="form-control"
        name="weight"
        placeholder="10"
        data-bind="
          value: weight,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.weight },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Range</label>
      <input
        type="text"
        class="form-control"
        name="range"
        placeholder="10"
        data-bind="
          value: range,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.range },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Damage Type</label>
      <input
        type="text"
        class="form-control"
        name="damageType"
        placeholder="Fire"
        data-bind="
          value: damageType,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.damageType },
          autocomplete: {
            source: $component.damageTypeOptions,
            onselect: $component.setDamageType
          },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Property</label>
      <input
        type="text"
        class="form-control"
        name="property"
        placeholder="Finesse"
        data-bind="
          value: property,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.property },
          autocomplete: {
            source: $component.propertyOptions,
            onselect: $component.setProperty
          },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Quantity</label>
      <input
        type="text"
        class="form-control"
        name="quantity"
        placeholder="1"
        data-bind="
          value: quantity,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.quantity },
        "
      />
    </div>
  </div>
  <div class="row">
    <div class="form-group col-xs-12">
      <label>Description</label>
      <textarea
        type="text"
        class="form-control"
        name="description"
        rows="4"
        placeholder="Armor of damage blocking"
        data-bind="
          value: description,
          event: { blur: $component.reviewInput, invalid: $component.invalidate },
          attr: { ...$component.validation.description },
        "
      ></textarea>
    </div>
  </div>
  <div class="modal-footer">
    <form-submit-actions params="{
      reset: $component.reset,
      delete: $component.delete,
      addForm: $component.addForm,
      showDisclaimer: $component.showDisclaimer
    }"></form-submit-actions>
  </div>
</form>
